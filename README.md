# JLab

2D 目标检测与属性分类的图像标注工具。

## 功能

- 多边形标注（目标与 ROI）
- 三种模式：浏览、绘制、编辑
- 支持 YOLO、Pascal VOC、COCO JSON 导出
- 中英文界面
- 可配置快捷键
- 主题管理（深色/浅色/跟随系统）
- 外观设置（字体大小、界面缩放）
- 选项对话框统一管理所有设置

## 构建

```bash
cargo build --release
```

## 运行

```bash
# 直接启动
cargo run --release -p lab-gui

# 打开项目目录
cargo run --release -p lab-gui -- /path/to/project
```

## 项目结构

```
label_root/
├── meta.yaml    # 项目配置（类别、属性）
├── images/      # 图像文件
└── labels/      # 标注文件
```

## 快捷键

| 操作 | 快捷键 |
|------|--------|
| 上/下一张 | A / D |
| 前进/后退 10 张 | W / S |
| 保存 | Ctrl+S |
| 模式切换 | Shift+1/2/3 |
| 完成绘制 | Space / 双击 |
| 删除 | Del |
| 取消 | Esc |
| 缩放 | 滚轮 |
| 平移 | Ctrl+拖动 / 中键 |
| 适应画布 | F |
| 缩放到 100% | Z |
| 切换左侧栏 | (可自定义) |
| 切换右侧栏 | (可自定义) |
| 切换自动保存 | (可自定义) |
| 移动对象 | 方向键 / Shift+方向键 (编辑模式) |
| 缩放对象 | +/- (编辑模式) |
| 变成矩形 | R (编辑模式) |
| 自交修正 | B (编辑模式) |

## 选项对话框

通过**文件菜单 → 选项**打开选项对话框，包含两个标签页：

### 常规标签
- **语言**：中文 / English
- **外观设置**：
  - 字体大小 (10-30)
  - 界面缩放 (0.5x-2.0x)
  - 主题（深色/浅色/跟随系统）
  - 显示滚动条
- **项目设置**：
  - 自动保存开关
- **恢复默认值**按钮

### 快捷键标签
- 全局搜索框
- 类别筛选（全部/文件/编辑/模式/导航/视图/工具）
- 快捷键编辑与冲突检测
- 重置默认值

## 配置文件

用户配置保存在 `~/.config/jlab/`：

- `ui_settings.json` - 字体、缩放、滚动条等外观设置
- `theme.json` - 主题设置
- `auto_save.json` - 自动保存设置
- `shortcuts.yaml` - 快捷键配置

## 许可证

MIT OR Apache-2.0
